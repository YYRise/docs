---
title: "Mysql"
date: 2021-07-23T23:35:41+08:00
draft: false 
---

## 1. 分库产生的问题

- 无法使用 SQL 的 join 查询
- 无法通过事务统一修改

## 2. 分表产生的问题

### 2.1 垂直分表

导致原来一次的查询变成多次查询

### 2.2 水平分表

复杂性主要为
1. 路由算法
- 范围路由：使用有序数列
> 缺点：分布不均匀

- Hash路由：hash 某个或几个列的组合值 
> 优点：表分布比较均匀，
> 缺点：扩充新的表很麻烦，所有数据都要重分布。

- 配置路由：用一张独立的表来记录路由信息
> 缺点：① 必须多查询一次，会影响整体性能
> ② 路由表太大，可能会成为瓶颈，再将路由表分库分表



